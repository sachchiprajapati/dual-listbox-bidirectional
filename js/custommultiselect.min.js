if ("undefined" == typeof jQuery) throw new Error("custommultiselect requires jQuery"); !function (t) { "use strict"; var e = jQuery.fn.jquery.split(" ")[0].split("."); if (e[0] < 2 && e[1] < 7) throw new Error("custommultiselect requires jQuery version 1.7 or higher") }(), function (t) { "function" == typeof define && define.amd ? define(["jquery"], t) : t(jQuery) }(function (t) { "use strict"; var e = function (t) { function e(e, i) { var o = e.prop("id"); this.$left = e, this.$right = t(i.right).length ? t(i.right) : t("#" + o + "_to"), this.actions = { $leftAll: t(i.leftAll).length ? t(i.leftAll) : t("#" + o + "_leftAll"), $rightAll: t(i.rightAll).length ? t(i.rightAll) : t("#" + o + "_rightAll"), $leftSelected: t(i.leftSelected).length ? t(i.leftSelected) : t("#" + o + "_leftSelected"), $rightSelected: t(i.rightSelected).length ? t(i.rightSelected) : t("#" + o + "_rightSelected"), $undo: t(i.undo).length ? t(i.undo) : t("#" + o + "_undo"), $redo: t(i.redo).length ? t(i.redo) : t("#" + o + "_redo"), $moveUp: t(i.moveUp).length ? t(i.moveUp) : t("#" + o + "_move_up"), $moveDown: t(i.moveDown).length ? t(i.moveDown) : t("#" + o + "_move_down") }, delete i.leftAll, delete i.leftSelected, delete i.right, delete i.rightAll, delete i.rightSelected, delete i.undo, delete i.redo, delete i.moveUp, delete i.moveDown, this.options = { keepRenderingSort: i.keepRenderingSort, submitAllLeft: void 0 === i.submitAllLeft || i.submitAllLeft, submitAllRight: void 0 === i.submitAllRight || i.submitAllRight, search: i.search, ignoreDisabled: void 0 !== i.ignoreDisabled && i.ignoreDisabled, matchOptgroupBy: void 0 !== i.matchOptgroupBy ? i.matchOptgroupBy : "label" }, delete i.keepRenderingSort, i.submitAllLeft, i.submitAllRight, i.search, i.ignoreDisabled, i.matchOptgroupBy, this.callbacks = i, this.init() } return e.prototype = { init: function () { var e = this; e.undoStack = [], e.redoStack = [], e.options.keepRenderingSort && (e.skipInitSort = !0, !1 !== e.callbacks.sort && (e.callbacks.sort = function (e, i) { return t(e).data("position") > t(i).data("position") ? 1 : -1 }), e.$left.attachIndex(), e.$right.each(function (e, i) { t(i).attachIndex() })), "function" == typeof e.callbacks.startUp && e.callbacks.startUp(e.$left, e.$right), e.skipInitSort || "function" != typeof e.callbacks.sort || (e.$left.mSort(e.callbacks.sort), e.$right.each(function (i, o) { t(o).mSort(e.callbacks.sort) })), e.options.search && e.options.search.left && (e.options.search.$left = t(e.options.search.left), e.$left.before(e.options.search.$left)), e.options.search && e.options.search.right && (e.options.search.$right = t(e.options.search.right), e.$right.before(t(e.options.search.$right))), e.events() }, events: function () { var e = this; e.$left.on("dblclick", "li", function (t) { t.preventDefault(); var i = e.$left.find("li." + e.callbacks.activeclassName); i.length && e.moveToRight(i, t) }), e.$left.on("keypress", function (t) { if (13 === t.keyCode) { t.preventDefault(); var i = e.$left.find("li." + e.callbacks.activeclassName); i.length && e.moveToRight(i, t) } }), e.$right.on("dblclick", "li", function (t) { t.preventDefault(); var i = e.$right.find("li." + e.callbacks.activeclassName); i.length && e.moveToLeft(i, t) }), e.$right.on("keydown", function (t) { if (8 === t.keyCode || 46 === t.keyCode) { t.preventDefault(); var i = e.$right.find("li." + e.callbacks.activeclassName); i.length && e.moveToLeft(i, t) } }), (navigator.userAgent.match(/MSIE/i) || navigator.userAgent.indexOf("Trident/") > 0 || navigator.userAgent.indexOf("Edge/") > 0) && (e.$left.dblclick(function (t) { e.actions.$rightSelected.trigger("click") }), e.$right.dblclick(function (t) { e.actions.$leftSelected.trigger("click") })), e.actions.$rightSelected.on("click", function (i) { i.preventDefault(); var o = e.$left.find("li." + e.callbacks.activeclassName); o.length && e.moveToRight(o, i), t(this).blur() }), e.actions.$leftSelected.on("click", function (i) { i.preventDefault(); var o = e.$right.find("li." + e.callbacks.activeclassName); o.length && e.moveToLeft(o, i), t(this).blur() }), e.actions.$rightAll.on("click", function (i) { i.preventDefault(); var o = e.$left.children(":not(span):not(.hidden)"); o.length && e.moveToRight(o, i), t(this).blur() }), e.actions.$leftAll.on("click", function (i) { i.preventDefault(); var o = e.$right.children(":not(span):not(.hidden)"); o.length && e.moveToLeft(o, i), t(this).blur() }), e.actions.$undo.on("click", function (t) { t.preventDefault(), e.undo(t) }), e.actions.$redo.on("click", function (t) { t.preventDefault(), e.redo(t) }), e.actions.$moveUp.on("click", function (i) { i.preventDefault(); var o = e.$right.find("." + e.callbacks.activeclassName); o.length && e.moveUp(o, i), t(this).blur() }), e.actions.$moveDown.on("click", function (i) { i.preventDefault(); var o = e.$right.find("." + e.callbacks.activeclassName); o.length && e.moveDown(o, i), t(this).blur() }) }, moveToRight: function (t, e, i, o) { return "function" == typeof this.callbacks.moveToRight ? this.callbacks.moveToRight(this, t, e, i, o) : !("function" == typeof this.callbacks.beforeMoveToRight && !i && !this.callbacks.beforeMoveToRight(this.$left, this.$right, t)) && (this.moveFromAtoB(this.$left, this.$right, t, e, i, o), o || (this.undoStack.push(["right", t]), this.redoStack = []), "function" != typeof this.callbacks.sort || i || this.doNotSortRight || this.$right.mSort(this.callbacks.sort), "function" != typeof this.callbacks.afterMoveToRight || i || this.callbacks.afterMoveToRight(this.$left, this.$right, t), this) }, moveToLeft: function (t, e, i, o) { return "function" == typeof this.callbacks.moveToLeft ? this.callbacks.moveToLeft(this, t, e, i, o) : !("function" == typeof this.callbacks.beforeMoveToLeft && !i && !this.callbacks.beforeMoveToLeft(this.$left, this.$right, t)) && (this.moveFromAtoB(this.$right, this.$left, t, e, i, o), o || (this.undoStack.push(["left", t]), this.redoStack = []), "function" != typeof this.callbacks.sort || i || this.$left.mSort(this.callbacks.sort), "function" != typeof this.callbacks.afterMoveToLeft || i || this.callbacks.afterMoveToLeft(this.$left, this.$right, t), this) }, moveFromAtoB: function (e, i, o, n, c, l) { var r = this; return o.each(function (e, o) { var n = t(o); if (n.hasClass("disabled")) return !0; i.move(n, r) }), r }, moveUp: function (t) { if ("function" == typeof this.callbacks.beforeMoveUp && !this.callbacks.beforeMoveUp(t)) return !1; t.first().prev().before(t), "function" == typeof this.callbacks.afterMoveUp && this.callbacks.afterMoveUp(t) }, moveDown: function (t) { if ("function" == typeof this.callbacks.beforeMoveDown && !this.callbacks.beforeMoveDown(t)) return !1; t.last().next().after(t), "function" == typeof this.callbacks.afterMoveDown && this.callbacks.afterMoveDown(t) }, undo: function (t) { var e = this.undoStack.pop(); if (e) switch (this.redoStack.push(e), e[0]) { case "left": this.moveToRight(e[1], t, !1, !0); break; case "right": this.moveToLeft(e[1], t, !1, !0) } }, redo: function (t) { var e = this.redoStack.pop(); if (e) switch (this.undoStack.push(e), e[0]) { case "left": this.moveToLeft(e[1], t, !1, !0); break; case "right": this.moveToRight(e[1], t, !1, !0) } } }, e }(t); t.custommultiselect = { defaults: { activeclassName: "active", startUp: function () { }, beforeMoveToRight: function (t, e, i) { return !0 }, afterMoveToRight: function (t, e, i) { }, beforeMoveToLeft: function (t, e, i) { return !0 }, afterMoveToLeft: function (t, e, i) { }, beforeMoveUp: function (t) { return !0 }, afterMoveUp: function (t) { }, beforeMoveDown: function (t) { return !0 }, afterMoveDown: function (t) { }, sort: function (t, e) { return "NA" == t.innerHTML ? 1 : "NA" == e.innerHTML ? -1 : t.innerHTML > e.innerHTML ? 1 : -1 }, fireSearch: function (t) { return t.length > 1 } } }; var i = window.navigator.userAgent, o = i.indexOf("MSIE ") + i.indexOf("Trident/") + i.indexOf("Edge/") > -3, n = i.toLowerCase().indexOf("safari") > -1; t.fn.custommultiselect = function (i) { return this.each(function () { var o = t(this), n = o.data("crlcu.custommultiselect"), c = t.extend({}, t.custommultiselect.defaults, o.data(), "object" == typeof i && i); n || o.data("crlcu.custommultiselect", n = new e(o, c)) }) }, t.fn.move = function (t, e) { return this.append(t.removeClass(e.callbacks.activeclassName)), this }, t.fn.removeIfEmpty = function () { return this.children().length || this.remove(), this }, t.fn.mShow = function () { return this.removeClass("hidden").show(), (o || n) && this.each(function (e, i) { t(i).parent().is("span") && t(i).parent().replaceWith(i), t(i).show() }), this }, t.fn.mHide = function () { return this.addClass("hidden").hide(), (o || n) && this.each(function (e, i) { t(i).parent().is("span") || t(i).wrap("<span>").hide() }), this }, t.fn.mSort = function (t) { return this.children().sort(t).appendTo(this), this }, t.fn.attachIndex = function () { this.children().each(function (e, i) { t(i).data("position", e) }) }, t.expr[":"].search = function (e, i, o) { var n = new RegExp(o[3], "i"); return t(e).text().match(n) } });